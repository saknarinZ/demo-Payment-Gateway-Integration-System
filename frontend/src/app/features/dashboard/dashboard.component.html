<div class="space-y-6">
  <!-- Page Header -->
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900">Dashboard</h1>
    <p class="text-gray-600">ภาพรวมของระบบ Payment Gateway</p>
  </div>

  <!-- Payment Stats Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
    <!-- Total Payments -->
    <div
      class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex items-center gap-4"
    >
      <div
        class="w-12 h-12 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center"
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <rect x="2" y="5" width="20" height="14" rx="2" />
          <line x1="2" y1="10" x2="22" y2="10" />
        </svg>
      </div>
      <div>
        <span class="text-2xl font-bold text-gray-900">{{
          stats()?.totalPayments ?? 0
        }}</span>
        <span class="block text-sm text-gray-500">Payment ทั้งหมด</span>
      </div>
    </div>

    <!-- Pending Payments -->
    <div
      class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex items-center gap-4"
    >
      <div
        class="w-12 h-12 rounded-lg bg-yellow-100 text-yellow-600 flex items-center justify-center"
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="10" />
          <polyline points="12 6 12 12 16 14" />
        </svg>
      </div>
      <div>
        <span class="text-2xl font-bold text-gray-900">{{
          stats()?.pendingPayments ?? 0
        }}</span>
        <span class="block text-sm text-gray-500">รอดำเนินการ</span>
      </div>
    </div>

    <!-- Completed Payments -->
    <div
      class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex items-center gap-4"
    >
      <div
        class="w-12 h-12 rounded-lg bg-green-100 text-green-600 flex items-center justify-center"
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
          <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
      </div>
      <div>
        <span class="text-2xl font-bold text-gray-900">{{
          stats()?.completedPayments ?? 0
        }}</span>
        <span class="block text-sm text-gray-500">สำเร็จ</span>
      </div>
    </div>

    <!-- Failed Payments -->
    <div
      class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex items-center gap-4"
    >
      <div
        class="w-12 h-12 rounded-lg bg-red-100 text-red-600 flex items-center justify-center"
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="10" />
          <line x1="15" y1="9" x2="9" y2="15" />
          <line x1="9" y1="9" x2="15" y2="15" />
        </svg>
      </div>
      <div>
        <span class="text-2xl font-bold text-gray-900">{{
          stats()?.failedPayments ?? 0
        }}</span>
        <span class="block text-sm text-gray-500">ล้มเหลว</span>
      </div>
    </div>
  </div>

  <!-- Amount Stats -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- Total Amount -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
      <span class="text-sm text-gray-500">ยอดรวมทั้งหมด</span>
      <span class="block text-3xl font-bold text-blue-600 mt-1">{{
        formatAmount(stats()?.totalAmount ?? 0)
      }}</span>
    </div>

    <!-- Today Stats -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
      <span class="text-sm text-gray-500">วันนี้</span>
      <span class="block text-3xl font-bold text-blue-600 mt-1">{{
        formatAmount(stats()?.todayAmount ?? 0)
      }}</span>
      <span class="text-sm text-gray-400"
        >{{ stats()?.todayPayments ?? 0 }} รายการ</span
      >
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100">
    <div class="px-6 py-4 border-b border-gray-100">
      <h3 class="font-semibold text-gray-900">การดำเนินการด่วน</h3>
    </div>
    <div class="p-6">
      <div class="flex flex-wrap gap-4">
        <a
          routerLink="/create-payment"
          class="inline-flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"
        >
          <svg
            class="w-5 h-5"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="12" y1="5" x2="12" y2="19" />
            <line x1="5" y1="12" x2="19" y2="12" />
          </svg>
          สร้าง Payment ใหม่
        </a>
        <a
          routerLink="/payments"
          class="inline-flex items-center gap-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors"
        >
          <svg
            class="w-5 h-5"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <line x1="3" y1="9" x2="21" y2="9" />
            <line x1="9" y1="21" x2="9" y2="9" />
          </svg>
          ดูรายการทั้งหมด
        </a>
        <button
          class="inline-flex items-center gap-2 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors"
          (click)="loadStats()"
        >
          <svg
            class="w-5 h-5"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="23 4 23 10 17 10" />
            <polyline points="1 20 1 14 7 14" />
            <path
              d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"
            />
          </svg>
          รีเฟรชข้อมูล
        </button>
      </div>
    </div>
  </div>

  <!-- System Status Card -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100">
    <div
      class="px-6 py-4 border-b border-gray-100 flex items-center justify-between"
    >
      <h3 class="font-semibold text-gray-900">สถานะระบบ</h3>
      <button
        class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
        (click)="checkHealth()"
      >
        @if (isLoading()) {
        <span
          class="inline-block w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mr-2"
        ></span>
        กำลังตรวจสอบ... } @else { รีเฟรช }
      </button>
    </div>
    <div class="p-6">
      @if (errorMessage()) {
      <div
        class="flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700"
      >
        <svg
          class="w-5 h-5"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
        <span>{{ errorMessage() }}</span>
      </div>
      } @else {
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="p-4 bg-gray-50 rounded-lg">
          <span class="text-sm text-gray-500">Service Name</span>
          <span class="block font-medium text-gray-900 mt-1">{{
            serviceName()
          }}</span>
        </div>
        <div class="p-4 bg-gray-50 rounded-lg">
          <span class="text-sm text-gray-500">Status</span>
          <span class="block mt-1">
            <span
              class="inline-block px-2 py-0.5 text-xs font-medium rounded-full"
              [class]="
                apiStatus() === 'UP'
                  ? 'bg-green-100 text-green-700'
                  : 'bg-red-100 text-red-700'
              "
            >
              {{ apiStatus() }}
            </span>
          </span>
        </div>
        <div class="p-4 bg-gray-50 rounded-lg">
          <span class="text-sm text-gray-500">Virtual Threads</span>
          <span class="block mt-1">
            <span
              class="inline-block px-2 py-0.5 text-xs font-medium rounded-full"
              [class]="
                virtualThreadsStatus() === 'enabled'
                  ? 'bg-blue-100 text-blue-700'
                  : 'bg-yellow-100 text-yellow-700'
              "
            >
              {{ virtualThreadsStatus() }}
            </span>
          </span>
        </div>
        <div class="p-4 bg-gray-50 rounded-lg">
          <span class="text-sm text-gray-500">Last Updated</span>
          <span class="block font-medium text-gray-900 mt-1">{{
            serverTime()
          }}</span>
        </div>
      </div>
      }
    </div>
  </div>

  <!-- Tech Stack Info -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100">
    <div class="px-6 py-4 border-b border-gray-100">
      <h3 class="font-semibold text-gray-900">Technology Stack</h3>
    </div>
    <div class="p-6">
      <div
        class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3"
      >
        @for (tech of techStack(); track tech.name) {
        <div class="p-3 bg-gray-50 rounded-lg text-center">
          <span class="block font-medium text-gray-900 text-sm">{{
            tech.name
          }}</span>
          <span class="text-xs text-gray-500">{{ tech.version }}</span>
        </div>
        }
      </div>
    </div>
  </div>
</div>
