<!-- Cart Sidebar - Presentational Component -->
<div
  class="h-fit"
  [class.bg-white]="!isMobile()"
  [class.rounded-2xl]="!isMobile()"
  [class.p-4]="!isMobile()"
  [class.md:p-6]="!isMobile()"
  [class.shadow-lg]="!isMobile()"
  [class.lg:sticky]="!isMobile()"
  [class.lg:top-24]="!isMobile()"
  [class.p-4]="isMobile()"
>
  <!-- Header (Desktop only) -->
  @if (!isMobile()) {
  <h2 class="text-base md:text-lg font-bold text-gray-800 mb-3 md:mb-4">
    ЁЯз║ р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕нр╕▓р╕лр╕▓р╕г
  </h2>
  }

  <!-- Cart Items List -->
  <div
    class="overflow-y-auto space-y-2 sm:space-y-3"
    [class.max-h-48]="isMobile()"
    [class.max-h-64]="!isMobile()"
    [class.md:max-h-72]="!isMobile()"
  >
    @for (cartItem of items(); track cartItem.item.id) {
    <app-cart-item
      [cartItem]="cartItem"
      (quantityChange)="onQuantityChange($event)"
      (remove)="onRemoveItem($event)"
    />
    }
  </div>

  <!-- Total & Checkout -->
  <div class="mt-3 sm:mt-4 pt-3 sm:pt-4 border-t-2 border-gray-200">
    <div class="flex justify-between items-center mb-3 sm:mb-4">
      <span class="font-medium text-sm sm:text-base">р╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</span>
      <span class="text-lg sm:text-xl font-bold text-blue-600">
        {{ formatPrice(total()) }}
      </span>
    </div>
    <button
      class="w-full py-3 sm:py-3.5 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base hover:scale-[1.02] active:scale-[0.98] transition-transform touch-manipulation"
      (click)="onCheckout()"
    >
      ЁЯН┤ р╕кр╕▒р╣Ир╕Зр╕нр╕▓р╕лр╕▓р╕гр╣Ар╕ер╕в!
    </button>
  </div>
</div>
